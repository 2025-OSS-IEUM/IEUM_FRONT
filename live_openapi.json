{"openapi":"3.1.0","info":{"title":"IEUM Backend API","description":"IEUM API Documentation","version":"1.0.0"},"paths":{"/auth/status":{"get":{"tags":["Auth"],"summary":"Get Auth Status","operationId":"get_auth_status_auth_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/signup":{"post":{"tags":["Auth"],"summary":"Signup","operationId":"signup_auth_signup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["Auth"],"summary":"Login","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/check-username":{"get":{"tags":["Auth"],"summary":"Check Username","operationId":"check_username_auth_check_username_get","parameters":[{"name":"username","in":"query","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckAvailabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/check-email":{"get":{"tags":["Auth"],"summary":"Check Email","operationId":"check_email_auth_check_email_get","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string","format":"email","title":"Email"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckAvailabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/username/lookup":{"post":{"tags":["Auth"],"summary":"Username Lookup","operationId":"username_lookup_auth_username_lookup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsernameLookupRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsernameLookupResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/password/reset":{"post":{"tags":["Auth"],"summary":"Request Password Reset","operationId":"request_password_reset_auth_password_reset_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/password/confirm":{"post":{"tags":["Auth"],"summary":"Confirm Password Reset","operationId":"confirm_password_reset_auth_password_confirm_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetConfirmRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetConfirmResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/":{"post":{"tags":["Reports"],"summary":"Create Report","operationId":"create_report_reports__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Reports"],"summary":"Get Reports By Bbox And Filters","description":"(B-3) BBox + 필터 기반 제보 조회 (로그인 없이 조회 가능)","operationId":"get_reports_by_bbox_and_filters_reports__get","parameters":[{"name":"min_lon","in":"query","required":true,"schema":{"type":"number","maximum":180,"minimum":-180,"title":"Min Lon"}},{"name":"min_lat","in":"query","required":true,"schema":{"type":"number","maximum":90,"minimum":-90,"title":"Min Lat"}},{"name":"max_lon","in":"query","required":true,"schema":{"type":"number","maximum":180,"minimum":-180,"title":"Max Lon"}},{"name":"max_lat","in":"query","required":true,"schema":{"type":"number","maximum":90,"minimum":-90,"title":"Max Lat"}},{"name":"type","in":"query","required":false,"schema":{"anyOf":[{"enum":["sidewalk_damage","construction","missing_crosswalk","no_tactile","etc"],"type":"string"},{"type":"null"}],"title":"Type"}},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"enum":["low","medium","high"],"type":"string"},{"type":"null"}],"title":"Severity"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"enum":["pending_review","approved","resolved"],"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReportResponse"},"title":"Response Get Reports By Bbox And Filters Reports  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me":{"get":{"tags":["Users"],"summary":"Get My Profile","description":"내 프로필 정보 조회 (임시 반환)","operationId":"get_my_profile_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/users/{user_id}":{"get":{"tags":["Users"],"summary":"Get User By Id","description":"특정 사용자 정보 조회 (임시)","operationId":"get_user_by_id_users__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/delete":{"delete":{"tags":["Users"],"summary":"Delete User","description":"회원 탈퇴 (임시)","operationId":"delete_user_users_delete_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/users/me/reports":{"get":{"tags":["Users"],"summary":"Get My Reports","operationId":"get_my_reports_users_me_reports_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/route/":{"post":{"tags":["Route"],"summary":"Get Route Candidates","description":"(C) Tmap Directions 기반 도보 경로 후보 조회","operationId":"get_route_candidates_route__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal/health":{"get":{"summary":"Health Check","description":"DB 연결 상태를 포함한 서버 헬스 체크","operationId":"health_check_internal_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/internal/metrics":{"get":{"tags":["Internal"],"summary":"Get Metrics","operationId":"get_metrics_internal_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/routes/safe":{"post":{"tags":["Routes"],"summary":"Get Safe Route With Scores","description":"C 단계에서 나온 RouteResponse(JSON):\n{\n    \"routes\": [\n        { \"distance\": ..., \"duration\": ..., \"path\": [...] },\n        ...\n    ]\n}\n\n이 구조 그대로 입력받아,\nD/E 단계에서 hazard 기반 안전 점수를 계산하고\n최종 SafeRouteResponse를 반환합니다.","operationId":"get_safe_route_with_scores_routes_safe_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SafeRouteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SafeRouteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/routes/reroute":{"post":{"tags":["Routes"],"summary":"Re Calculate Route","description":"[재탐색 기능]\n사용자 이탈 시, 현재 좌표(current)와 목적지(dest)를 받아\n새로운 경로를 탐색하고 안전 점수를 포함하여 반환합니다.","operationId":"re_calculate_route_routes_reroute_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RerouteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SafeRouteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CheckAvailabilityResponse":{"properties":{"available":{"type":"boolean","title":"Available"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["available"],"title":"CheckAvailabilityResponse"},"ConsentCreate":{"properties":{"terms":{"type":"boolean","title":"Terms"},"privacy":{"type":"boolean","title":"Privacy"}},"type":"object","required":["terms","privacy"],"title":"ConsentCreate"},"DisabilityType":{"type":"string","enum":["none","blind","low_vision","hearing","mobility","cognitive","other"],"title":"DisabilityType"},"GeoJSONPoint":{"properties":{"type":{"type":"string","const":"Point","title":"Type","default":"Point"},"coordinates":{"items":{"type":"number"},"type":"array","maxItems":2,"minItems":2,"title":"Coordinates","description":"[lng, lat] in decimal degrees","example":[127.043,37.501]}},"type":"object","required":["coordinates"],"title":"GeoJSONPoint"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InputPathPoint":{"properties":{"lat":{"type":"number","title":"Lat"},"lon":{"type":"number","title":"Lon"}},"type":"object","required":["lat","lon"],"title":"InputPathPoint"},"InputRoute":{"properties":{"distance":{"type":"number","title":"Distance"},"duration":{"type":"number","title":"Duration"},"path":{"items":{"$ref":"#/components/schemas/InputPathPoint"},"type":"array","title":"Path"}},"type":"object","required":["distance","duration","path"],"title":"InputRoute"},"LoginRequest":{"properties":{"username":{"type":"string","maxLength":20,"minLength":4,"title":"Username"},"password":{"type":"string","minLength":6,"title":"Password"}},"type":"object","required":["username","password"],"title":"LoginRequest"},"LoginResponse":{"properties":{"accessToken":{"type":"string","title":"Accesstoken"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"refreshToken":{"type":"string","title":"Refreshtoken"},"expiresIn":{"type":"integer","title":"Expiresin"},"user":{"$ref":"#/components/schemas/UserInLoginResponse"}},"type":"object","required":["accessToken","refreshToken","expiresIn","user"],"title":"LoginResponse"},"PasswordResetConfirmRequest":{"properties":{"username":{"type":"string","title":"Username"},"code":{"type":"string","title":"Code"},"newPassword":{"type":"string","minLength":8,"title":"Newpassword"},"newPasswordConfirm":{"type":"string","title":"Newpasswordconfirm"}},"type":"object","required":["username","code","newPassword","newPasswordConfirm"],"title":"PasswordResetConfirmRequest"},"PasswordResetConfirmResponse":{"properties":{"message":{"type":"string","title":"Message","default":"비밀번호가 성공적으로 재설정되었습니다."}},"type":"object","title":"PasswordResetConfirmResponse"},"PasswordResetRequest":{"properties":{"username":{"type":"string","title":"Username"}},"type":"object","required":["username"],"title":"PasswordResetRequest"},"PasswordResetResponse":{"properties":{"expiresIn":{"type":"integer","title":"Expiresin"}},"type":"object","required":["expiresIn"],"title":"PasswordResetResponse"},"ReportCreate":{"properties":{"type":{"type":"string","enum":["sidewalk_damage","construction","missing_crosswalk","no_tactile","etc"],"title":"Type","description":"Type of hazard"},"description":{"type":"string","maxLength":200,"title":"Description","description":"Short description of the hazard"},"location":{"$ref":"#/components/schemas/GeoJSONPoint"},"photoUrls":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Photourls","description":"Optional photo URLs"},"detectedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Detectedat","description":"Time when hazard was detected"},"severity":{"type":"string","enum":["low","medium","high"],"title":"Severity","description":"Severity level (low/medium/high)","default":"medium"},"status":{"type":"string","enum":["pending_review","approved","resolved"],"title":"Status","description":"Current review status","default":"pending_review"}},"type":"object","required":["type","description","location"],"title":"ReportCreate","example":{"description":"보도블록이 심하게 파손되어 휠체어 이동이 어렵습니다.","location":{"coordinates":[127.043,37.501],"type":"Point"},"severity":"high","type":"sidewalk_damage"}},"ReportResponse":{"properties":{"type":{"type":"string","enum":["sidewalk_damage","construction","missing_crosswalk","no_tactile","etc"],"title":"Type","description":"Type of hazard"},"description":{"type":"string","maxLength":200,"title":"Description","description":"Short description of the hazard"},"location":{"$ref":"#/components/schemas/GeoJSONPoint"},"photoUrls":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Photourls","description":"Optional photo URLs"},"detectedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Detectedat","description":"Time when hazard was detected"},"severity":{"type":"string","enum":["low","medium","high"],"title":"Severity","description":"Severity level (low/medium/high)","default":"medium"},"status":{"type":"string","enum":["pending_review","approved","resolved"],"title":"Status","description":"Current review status","default":"pending_review"},"_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id","description":"Unique identifier (MongoDB ObjectId)"},"createdAt":{"type":"string","format":"date-time","title":"Createdat","description":"Timestamp when report was created"}},"type":"object","required":["type","description","location","createdAt"],"title":"ReportResponse","example":{"description":"보도블록이 심하게 파손되어 휠체어 이동이 어렵습니다.","location":{"coordinates":[127.043,37.501],"type":"Point"},"severity":"high","type":"sidewalk_damage"}},"RerouteRequest":{"properties":{"current_lat":{"type":"number","title":"Current Lat"},"current_lon":{"type":"number","title":"Current Lon"},"dest_lat":{"type":"number","title":"Dest Lat"},"dest_lon":{"type":"number","title":"Dest Lon"}},"type":"object","required":["current_lat","current_lon","dest_lat","dest_lon"],"title":"RerouteRequest"},"RouteOption":{"properties":{"distance":{"type":"integer","title":"Distance"},"duration":{"type":"integer","title":"Duration"},"path":{"items":{"$ref":"#/components/schemas/RoutePoint"},"type":"array","title":"Path"}},"type":"object","required":["distance","duration","path"],"title":"RouteOption"},"RoutePoint":{"properties":{"lat":{"type":"number","title":"Lat"},"lon":{"type":"number","title":"Lon"}},"type":"object","required":["lat","lon"],"title":"RoutePoint"},"RouteRequest":{"properties":{"start_lat":{"type":"number","title":"Start Lat"},"start_lon":{"type":"number","title":"Start Lon"},"end_lat":{"type":"number","title":"End Lat"},"end_lon":{"type":"number","title":"End Lon"},"alternatives":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Alternatives","default":true}},"type":"object","required":["start_lat","start_lon","end_lat","end_lon"],"title":"RouteRequest"},"RouteResponse":{"properties":{"routes":{"items":{"$ref":"#/components/schemas/RouteOption"},"type":"array","title":"Routes"}},"type":"object","required":["routes"],"title":"RouteResponse"},"SafeRouteOption":{"properties":{"distance":{"type":"number","title":"Distance"},"duration":{"type":"number","title":"Duration"},"safetyScore":{"type":"number","title":"Safetyscore"},"path":{"items":{"$ref":"#/components/schemas/SafeRouteSegment"},"type":"array","title":"Path"}},"type":"object","required":["distance","duration","safetyScore","path"],"title":"SafeRouteOption"},"SafeRouteRequest":{"properties":{"routes":{"items":{"$ref":"#/components/schemas/InputRoute"},"type":"array","title":"Routes"}},"type":"object","required":["routes"],"title":"SafeRouteRequest"},"SafeRouteResponse":{"properties":{"routes":{"items":{"$ref":"#/components/schemas/SafeRouteOption"},"type":"array","title":"Routes"},"bestRouteIndex":{"type":"integer","title":"Bestrouteindex"}},"type":"object","required":["routes","bestRouteIndex"],"title":"SafeRouteResponse"},"SafeRouteSegment":{"properties":{"lat":{"type":"number","title":"Lat"},"lon":{"type":"number","title":"Lon"},"riskScore":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Riskscore"}},"type":"object","required":["lat","lon"],"title":"SafeRouteSegment"},"SignupRequest":{"properties":{"username":{"type":"string","maxLength":20,"minLength":4,"title":"Username"},"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","minLength":8,"title":"Password"},"passwordConfirm":{"type":"string","title":"Passwordconfirm"},"phone":{"type":"string","maxLength":11,"minLength":11,"title":"Phone"},"name":{"anyOf":[{"type":"string","maxLength":50,"minLength":1},{"type":"null"}],"title":"Name"},"disabilityType":{"$ref":"#/components/schemas/DisabilityType"},"consent":{"$ref":"#/components/schemas/ConsentCreate"}},"type":"object","required":["username","email","password","passwordConfirm","phone","disabilityType","consent"],"title":"SignupRequest"},"UserInDB":{"properties":{"user_id":{"type":"string","title":"User Id"},"username":{"type":"string","title":"Username"},"email":{"type":"string","format":"email","title":"Email"},"phone":{"type":"string","title":"Phone"},"password_hash":{"type":"string","title":"Password Hash"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"disabilityType":{"$ref":"#/components/schemas/DisabilityType"},"createdAt":{"type":"string","format":"date-time","title":"Createdat"},"updatedAt":{"type":"string","format":"date-time","title":"Updatedat"},"is_active":{"type":"boolean","title":"Is Active","default":true}},"type":"object","required":["user_id","username","email","phone","password_hash","disabilityType"],"title":"UserInDB"},"UserInLoginResponse":{"properties":{"user_id":{"type":"string","title":"User Id"},"username":{"type":"string","title":"Username"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"}},"type":"object","required":["user_id","username","name"],"title":"UserInLoginResponse"},"UsernameLookupRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"}},"type":"object","required":["email"],"title":"UsernameLookupRequest"},"UsernameLookupResponse":{"properties":{"username":{"type":"string","title":"Username"}},"type":"object","required":["username"],"title":"UsernameLookupResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"BearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"security":[{"BearerAuth":[]}]}